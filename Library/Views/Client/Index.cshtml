@model Library.Models.Clients.ClientIndexViewModel

@{
    ViewBag.Title = "Клиенты";
}

<div class="page-header">
    <h1>Клиенты</h1>
    <button id="add-client-btn" class="add-button" title="Добавить клиента">+</button>
</div>

<div id="new-client-form" class="panel" style=@(Model.IsFormOpen ? "display:block" : "display:none;")>
    <h2>Новый клиент</h2>

    @Html.ValidationSummary(true)

    @using (Html.BeginForm("Index", "Client", FormMethod.Post, new {id = "new-client-form-data"}))
    {
        @Html.AntiForgeryToken()

        <div class="form-row">
            @Html.LabelFor(m => m.NewClient.Name)
            @Html.TextBoxFor(m => m.NewClient.Name)
            @Html.ValidationMessageFor(m => m.NewClient.Name)
        </div>

        <div class="form-row">
            @Html.LabelFor(m => m.NewClient.PassportId)
            @Html.TextBoxFor(m => m.NewClient.PassportId)
            @Html.ValidationMessageFor(m => m.NewClient.PassportId)
        </div>

        <button type="submit" class="primary-btn">Сохранить</button>
    }
</div>

<div class="panel">
    <h2>Список клиентов</h2>

    @if (Model.Clients != null && Model.Clients.Any())
    {
        <table class="table">
            <thead>
                <tr>
                    <th>@Html.DisplayNameFor(m => m.Clients.First().Name)</th>
                    <th>@Html.DisplayNameFor(m => m.Clients.First().PassportId)</th>
                    <th>@Html.DisplayNameFor(m => m.Clients.First().RegistrationDate)</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var client in Model.Clients)
                {
                    <tr>
                        <td>@Html.ActionLink(@client.Name, "Details", "Client", new { id = @client.Id }, null)</td>
                        <td>@client.PassportId</td>
                        <td>@client.RegistrationDate.ToString("dd.MM.yyyy HH:mm")</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p>Пока нет ни одного клиента.</p>
    }
</div>

@section Scripts { <script src="~/Scripts/App/ClientIndex.js"></script> }
